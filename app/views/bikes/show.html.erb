<%= render partial: 'layouts/flash' %>
<div class="container">
  <div class="row">
    <div class="col-md-6">
      <%= attachment_image_tag(@bike, :bike_image, :fill, 400, 300, fallback: "no_image.jpg") %>
    </div>

    <div class="col-md-6">
      <span class="under">name</span>
      <h4><%= @bike.name %></h4><br>
      <span class="under">introduction</span>
      <h4><%= @bike.introduction %></h4><br>
      <h4 class="text-success">予約受付中</h4><br>
      <%= form_with model: @reservation, url: new_reservation_path ,local: true, method: :get do |f| %>
        <%= f.hidden_field :bike_id, value:@bike.id %>
        <%= f.hidden_field :reserved_id, value:@bike.user_id %>
        <%= f.hidden_field :reserver_id, value:current_user.id %>
        <%= f.button :type => "submit" do %>
          <i style="color: royalblue;">予約に進む</i>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<h4>オーナー</h4>
<div class="container">
  <div class="row">
    <%= link_to user_path(@bike.user) do %>
      <%= attachment_image_tag(@bike.user, :profile_image, :fill, 150, 150, fallback: "no_image.jpg") %>
      <%= @bike.user.nickname %>
      <!--<div class="review-evaluation" data-score="<#å%= @review.evaluation %>"></div>-->
      <!--<script>-->
      <!--  $('.review-evaluation').raty({-->
      <!--    readOnly: true,-->
      <!--    score: function() {-->
      <!--      return $(this).attr('data-score');-->
      <!--    },-->
      <!--    path: '/assets/'-->
      <!--  });-->
      <!--</script>-->
    <% end %>
  </div>
</div>

<div class="yakkan">
  <h2>利用約款</h2><br>
  <h4>シェア条件</h4><br>
  <p>損害発生時の責任分担	帰責割合に応じて負担</p><br>
  <p>ドライバーの本人確認方法	受渡時に免許証を確認</p><br>
  <p>バイクの管理方法	オーナーが一元管理</p><br>

  <h4>オーナーのキャンセルポリシー</h4><br>
  <p>24時間前	100%</p><br>
  <p>72時間前	50%</p><br>
  <p>決済後	100%</p><br>
</div>
<div></div>
<!-- カレンダーテンプレを表示 -->
<%= month_calendar events: @reservations do |date, reservations| %>
  <%= date.day %>


<!-- 予約を表示させる-->
  <% reservations.each do |reservation| %>
    <div>
      <!--<#%= reservation.start_time.hour %>:<#%= reservation.start_time.min %>-->
      <%= reservation.reservation_name %>
    </div>
  <% end %>
<% end %>

<h1>予約日を指定してください。</h1>

<%= form_with model:@reservation, url: confirm_reservations_path, local: true do |f| %>
  <%= f.hidden_field :bike_id, value:@bike.id %>
  <%= f.hidden_field :reserved_id, value:@bike.user_id %>
  <%= f.hidden_field :reserver_id, value:current_user.id %>

  <!--名前はあとで消す-->
  <!--<div class="reservation_name">-->
  <!--  <#%= f.label :reservation_name %>-->
  <!--  <#%= f.text_field :reservation_name %>-->
  <!--</div>-->

  <div class="time">
    <%= f.label :start_time %>
    <%= f.datetime_select :start_time %>
  </div>

  <div class="submit">
    <%= f.submit 'Reserve', class:'btn btn-lg btn-outline-dark' %>
  </div>

<% end %>

